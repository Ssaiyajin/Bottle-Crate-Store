<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8"/>
    <link th:href="@{/css/style.css}" th:rel="stylesheet"/>
    <title>New User</title>
</head>
<body>
<meta name="author" content="Muhammad Sultan"/>
<meta name="Description" content="Template to register new user"/>

<div th:replace="fragments/header.html :: header"></div>

<div id="boxes">
    <div id="leftbox">
        <h1>Register new User</h1>
    </div>
</div>

<!-- Form wraps the table to produce valid HTML structure -->
<form method="POST" th:action="@{/register}" th:object="${registrationForm}">
    <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
    <table>
        <caption>User Details</caption>

        <tr>
            <td colspan="2">
                <b th:if="${error}" th:text="${error}" style="color: red;"></b>
            </td>
        </tr>

        <tr>
            <td><label for="username">Username</label></td>
            <td>
                <input id="username" required th:field="*{username}" type="text" placeholder="Enter a Username"/>
                <span class="text-danger" th:errors="*{username}" th:if="${#fields.hasErrors('username')}"></span>
            </td>
        </tr>

        <tr>
            <td><label for="password">Password</label></td>
            <td>
                <input id="password" required th:field="*{password}" type="password" placeholder="Enter a Password"/>
                <span class="text-danger" th:errors="*{password}" th:if="${#fields.hasErrors('password')}"></span>
            </td>
        </tr>

        <tr>
            <td><label for="email">E-mail</label></td>
            <td>
                <input id="email" required th:field="*{email}" type="email" placeholder="Enter E-mail"/>
                <span class="text-danger" th:errors="*{email}" th:if="${#fields.hasErrors('email')}"></span>
            </td>
        </tr>

        <tr>
            <td><label for="birthday">Birthdate</label></td>
            <td>
                <input id="birthday" required th:field="*{birthday}" type="date"/>
                <span class="alert alert-danger" th:errors="*{birthday}" th:if="${#fields.hasErrors('birthday')}"></span>
            </td>
        </tr>

        <tr>
            <td colspan="2"><b>Billing Address</b></td>
        </tr>

        <tr>
            <td><label for="billing-street">Street</label></td>
            <td>
                <input id="billing-street" required th:field="*{billingAddresses[0].street}" type="text" placeholder="Street"/>
                <span class="alert alert-danger" th:errors="*{billingAddresses[0].street}" th:if="${#fields.hasErrors('billingAddresses[0].street')}"></span>
            </td>
        </tr>

        <tr>
            <td><label for="billing-number">Number</label></td>
            <td>
                <input id="billing-number" required th:field="*{billingAddresses[0].number}" type="text" placeholder="Number"/>
                <span class="alert alert-danger" th:errors="*{billingAddresses[0].number}" th:if="${#fields.hasErrors('billingAddresses[0].number')}"></span>
            </td>
        </tr>

        <tr>
            <td><label for="billing-postalcode">Postal Code</label></td>
            <td>
                <input id="billing-postalcode" required th:field="*{billingAddresses[0].postalcode}" type="text" placeholder="Postal Code"/>
                <span class="alert alert-danger" th:errors="*{billingAddresses[0].postalcode}" th:if="${#fields.hasErrors('billingAddresses[0].postalcode')}"></span>
            </td>
        </tr>

        <tr>
            <td colspan="2"><b>Delivery Address</b></td>
        </tr>

        <tr>
            <td><label for="delivery-street">Street</label></td>
            <td>
                <input id="delivery-street" required th:field="*{deliveryAddresses[0].street}" type="text" placeholder="Street"/>
                <span class="alert alert-danger" th:errors="*{deliveryAddresses[0].street}" th:if="${#fields.hasErrors('deliveryAddresses[0].street')}"></span>
            </td>
        </tr>

        <tr>
            <td><label for="delivery-number">Number</label></td>
            <td>
                <input id="delivery-number" required th:field="*{deliveryAddresses[0].number}" type="text" placeholder="Number"/>
                <span class="alert alert-danger" th:errors="*{deliveryAddresses[0].number}" th:if="${#fields.hasErrors('deliveryAddresses[0].number')}"></span>
            </td>
        </tr>

        <tr>
            <td><label for="delivery-postalcode">Postal Code</label></td>
            <td>
                <input id="delivery-postalcode" required th:field="*{deliveryAddresses[0].postalcode}" type="text" placeholder="Postal Code"/>
                <span class="alert alert-danger" th:errors="*{deliveryAddresses[0].postalcode}" th:if="${#fields.hasErrors('deliveryAddresses[0].postalcode')}"></span>
            </td>
        </tr>

        <tr>
            <td></td>
            <td>
                <button class="button2" type="submit">Create</button>
            </td>
        </tr>
    </table>
</form>
</body>
</html>